<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cargando √Ålbum...</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
</head>
<body>

    <header class="main-header">
        <div class="container">
            <a href="/dashboard.html" class="logo">Exponiendo Tacna</a>
            <nav id="main-nav" class="main-nav"></nav>
        </div>
    </header>

    <main class="album-page-wrapper">
        <div class="album-header-bar container">
            <button id="back-button" class="btn btn-secondary album-back-btn">
                <i class="fas fa-arrow-left"></i> Regresar
            </button>
            <div id="owner-action-buttons"></div>
        </div>

        <section class="album-grid-container container">
            <div class="album-content-panel">
                <div class="album-media-feed" id="media-feed"></div>
            </div>

            <aside class="album-sidebar">
                <div class="sidebar-box album-info-box">
                    <h1 id="album-title" class="album-main-title"></h1>
                    <p id="album-description" class="album-description"></p>
                    <div id="album-tags-container" class="album-tags-list"></div>
                </div>

                <div class="sidebar-box album-owner-box">
                    <div class="owner-info">
                        <img id="owner-avatar" src="/static/img/placeholder-default.jpg" alt="Avatar del Creador" class="owner-avatar">
                        <a id="album-owner-link" href="#" class="owner-username">@usuario</a>
                    </div>
                    <button id="follow-btn" class="btn btn-primary follow-btn" style="display: none;"><i class="fas fa-user-plus"></i> Seguir</button>
                    <div id="owner-stats" class="owner-stats" style="margin-top: 15px;"></div>
                </div>

                <div class="sidebar-box album-stats-box">
                    <div class="stat-item"><i class="fas fa-eye"></i> <span id="views-count">0</span> vistas</div>
                    <div class="stat-item"><i class="fas fa-images"></i> <span id="photos-videos-count">0</span></div>
                </div>

                <div class="sidebar-box album-actions-box">
                    <button id="like-btn" class="btn btn-action"><i class="fas fa-heart"></i> <span id="likes-count">0</span></button>
                    <button id="save-btn" class="btn btn-action"><i class="fas fa-bookmark"></i> <span id="saves-count">0</span></button>
                    <button id="share-btn" class="btn btn-action"><i class="fas fa-share-alt"></i> Compartir</button>
                    <button id="report-btn" class="btn btn-action report-btn" data-modal-target="#report-album-modal"><i class="fas fa-flag"></i> Reportar</button>
                    <div id="share-link-modal" class="share-link-modal">
                        <input type="text" id="album-share-link" readonly>
                        <button id="copy-link-btn" class="btn btn-primary">Copiar</button>
                        <span id="copy-feedback" class="copy-feedback"></span>
                    </div>
                </div>
                
                <div class="sidebar-box comments-box">
                    <h3>Comentarios (<span id="comments-count">0</span>)</h3>
                    <form id="comment-form" class="comment-form" style="display: none;">
                        <div class="comment-input-area">
                            <img id="current-user-avatar" src="/static/img/placeholder-default.jpg" alt="Tu Avatar" class="comment-user-avatar">
                            <textarea name="text" placeholder="Escribe un comentario..." required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Enviar</button>
                    </form>
                    <div id="comments-list" class="comments-list"></div>
                </div>
            </aside>
        </section>
    </main>
    
    <div id="toast-container"></div>

    <div id="confirm-modal" class="modal">
        <div class="modal-content">
            <h2 id="confirm-title">Confirmar Acci√≥n</h2>
            <p id="confirm-message">¬øEst√°s seguro?</p>
            <div class="confirm-buttons">
                <button id="confirm-cancel-btn" class="btn btn-secondary">Cancelar</button>
                <button id="confirm-ok-btn" class="btn btn-primary">Aceptar</button>
            </div>
        </div>
    </div>
      
    <div id="alert-modal" class="modal">
        <div class="modal-content">
            <h2 id="alert-title">Aviso</h2>
            <p id="alert-message"></p>
            <button id="alert-ok-btn" class="btn btn-primary">Aceptar</button>
        </div>
    </div>
    
    <div id="search-modal" class="modal">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <h2>Buscar Usuarios o √Ålbumes</h2>
            <div class="form-group">
                <input type="text" id="search-input" placeholder="Escribe para buscar..." autocomplete="off">
            </div>
            <div id="search-results-container"></div>
        </div>
    </div>

    <div id="notifications-panel">
        <div class="panel-header">
            <h3>Notificaciones</h3>
        </div>
        <div id="notifications-list"></div>
        <div class="panel-footer">
            <button id="mark-all-as-read-btn">Marcar todo como le√≠do</button>
            <button id="clear-read-notifications-btn">Limpiar Le√≠das</button>
        </div>
    </div>
    
    <div id="chat-preview-panel">
        <div class="panel-header">
            <h3>Mensajes</h3>
        </div>
        <div id="chat-preview-list"></div>
        <div class="panel-footer">
            <a href="/chat.html" class="btn btn-primary" style="width: 100%;">Ver todos los chats</a>
        </div>
    </div>

    <div id="report-comment-modal" class="modal">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <h2>Reportar Comentario</h2>
            <form id="report-comment-form">
                <div class="form-group">
                    <label for="report-comment-reason">Raz√≥n del Reporte:</label>
                    <select id="report-comment-reason" name="reason" required>
                        <option value="">Selecciona una raz√≥n</option>
                        <option value="acoso">Acoso o bullying</option>
                        <option value="spam">Spam o publicidad no deseada</option>
                        <option value="contenido inapropiado">Contenido sensible o inapropiado</option>
                        <option value="otro">Otro</option>
                    </select>
                </div>
                <button type="submit" class="btn btn-primary">Enviar Reporte</button>
            </form>
        </div>
    </div>

    <div id="report-album-modal" class="modal">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <h2>Reportar √Ålbum</h2>
            <form id="report-form">
                <div class="form-group"><label for="report-reason">Raz√≥n:</label><select id="report-reason" name="reason" required><option value="">Selecciona una raz√≥n</option><option value="contenido inapropiado">Contenido Inapropiado</option><option value="spam">Spam</option><option value="violencia">Violencia</option><option value="acoso">Acoso</option><option value="otros">Otros</option></select></div>
                <div class="form-group"><label for="report-description">Descripci√≥n (opcional):</label><textarea id="report-description" name="description" rows="4"></textarea></div>
                <button type="submit" class="btn btn-primary">Enviar Reporte</button>
            </form>
        </div>
    </div>

    <div id="manage-album-modal" class="modal">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <h2>Gestionar √Ålbum</h2>
            <div class="management-tabs tabs"><button class="tab-link active" data-tab="details-tab">Detalles</button><button class="tab-link" data-tab="media-tab">Archivos</button><button class="tab-link" data-tab="upload-tab">Subir M√°s</button></div>
            <div id="details-tab" class="tab-content active"><form id="edit-album-form"><div class="form-group"><label>T√≠tulo:</label><input type="text" name="title" required></div><div class="form-group"><label>Descripci√≥n:</label><textarea name="description" rows="4"></textarea></div><div class="form-group"><label>Etiquetas (separadas por comas):</label><input type="text" name="tags"></div><button type="submit" class="btn btn-primary">Guardar Cambios</button></form></div>
            <div id="media-tab" class="tab-content"><p>Arrastra para reordenar. Haz clic en üáΩ para <b>eliminar</b> o en üñºÔ∏è para establecer como <b>portada</b>.</p><div id="media-management-grid" class="media-management-grid"></div><button id="save-order-btn" class="btn btn-primary" style="margin-top: 1rem;">Guardar Orden</button></div>
            <div id="upload-tab" class="tab-content"><form id="add-media-form"><p>Selecciona archivos para a√±adir a este √°lbum.</p><div class="form-group"><label for="add-files-input" class="btn btn-secondary custom-file-upload">Seleccionar Archivos...</label><input id="add-files-input" type="file" name="file" required multiple accept="image/*,video/*" style="display: none;"><span id="add-files-status" class="file-upload-status"></span></div><button type="submit" class="btn btn-primary">A√±adir Archivos</button></form></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/sortablejs@latest/Sortable.min.js"></script>
    <script src="/static/js/utils.js"></script>
    <script src="/static/js/main.js"></script>
    <script src="/static/js/album.js"></script>
</body>

</html>

