<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cargando Álbum...</title>
    <link rel="icon" href="/favicon.ico" type="image/x-icon">
    <link rel="stylesheet" href="/static/css/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
</head>
<body>

    <header class="main-header">
        <div class="container">
            <a href="/dashboard.html" class="logo">Exponiendo Tacna</a>
            <nav id="main-nav" class="main-nav">
    <button class="nav-icon-btn" id="search-btn" title="Buscar"><i class="fas fa-search"></i></button>
    <button class="nav-icon-btn" id="notifications-btn" title="Notificaciones">
        <i class="fas fa-bell"></i>
        <span class="notification-badge"></span>
    </button>
    <button class="nav-icon-btn" id="chat-btn" title="Chat"><i class="fas fa-comment-dots"></i></button>
    <a href="#" id="my-profile-link" class="btn btn-secondary">Mi Perfil</a>
    <a href="#" id="logout-btn" class="btn btn-secondary">Cerrar Sesión</a>
</nav>
        </div>
    </header>

    <main class="album-page-wrapper">
        <div class="album-header-bar container">
            <button id="back-button" class="btn btn-secondary album-back-btn">
                <i class="fas fa-arrow-left"></i> Regresar
            </button>
            <div id="owner-action-buttons">
                </div>
        </div>

        <section class="album-grid-container container">
            <div class="album-content-panel">
                <div class="album-media-feed" id="media-feed">
                    </div>
            </div>

            <aside class="album-sidebar">
                <div class="sidebar-box album-info-box">
                    <h1 id="album-title" class="album-main-title"></h1>
                    <p id="album-description" class="album-description"></p>
                    <div id="album-tags-container" class="album-tags-list"></div>
                </div>

                <div class="sidebar-box album-owner-box">
                    <div class="owner-info">
                        <img id="owner-avatar" src="/static/img/placeholder-default.jpg" alt="Avatar del Creador" class="owner-avatar">
                        <a id="album-owner-link" href="#" class="owner-username">@usuario</a>
                    </div>
                    <button id="follow-btn" class="btn btn-primary follow-btn">
                        <i class="fas fa-user-plus"></i> Seguir
                    </button>
                    <div id="owner-stats" class="owner-stats" style="margin-top: 15px;">
                        <span id="owner-followers-count"><strong>0</strong> seguidores</span>
                        <span id="owner-following-count"><strong>0</strong> seguidos</span>
                    </div>
                </div>

                <div class="sidebar-box album-stats-box">
                    <div class="stat-item">
                        <i class="fas fa-eye"></i> <span id="views-count">0</span> vistas
                    </div>
                    <div class="stat-item">
                        <i class="fas fa-images"></i> <span id="photos-videos-count">0 fotos / 0 videos</span>
                    </div>
                </div>

                <div class="sidebar-box album-actions-box">
                    <button id="like-btn" class="btn btn-action"><i class="fas fa-heart"></i> <span id="likes-count">0</span></button>
                    <button id="save-btn" class="btn btn-action"><i class="fas fa-bookmark"></i> <span id="saves-count">0</span></button>
                    <button id="share-btn" class="btn btn-action"><i class="fas fa-share-alt"></i> Compartir</button>
                    <button id="report-btn" class="btn btn-action report-btn" data-modal-target="#report-album-modal"><i class="fas fa-flag"></i> Reportar</button>
                    <div id="share-link-modal" class="share-link-modal">
                        <input type="text" id="album-share-link" readonly>
                        <button id="copy-link-btn" class="btn btn-primary">Copiar</button>
                        <span id="copy-feedback" class="copy-feedback"></span>
                    </div>
                </div>
                
                <div class="sidebar-box comments-box">
                    <h3>Comentarios (<span id="comments-count">0</span>)</h3>
                    <form id="comment-form" class="comment-form">
                        <div class="comment-input-area">
                            <img id="current-user-avatar" src="/static/img/placeholder-default.jpg" alt="Tu Avatar" class="comment-user-avatar">
                            <textarea name="text" placeholder="Escribe un comentario..." required></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Enviar</button>
                    </form>
                    <div id="comments-list" class="comments-list">
                        </div>
                </div>
            </aside>
        </section>
    </main>

    <div id="report-album-modal" class="modal">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <h2>Reportar Álbum</h2>
            <form id="report-form">
                <div class="form-group">
                    <label for="report-reason">Razón del Reporte:</label>
                    <select id="report-reason" name="reason" required>
                        <option value="">Selecciona una razón</option>
                        <option value="contenido inapropiado">Contenido Inapropiado</option>
                        <option value="spam">Spam / Publicidad</option>
                        <option value="violencia">Violencia</option>
                        <option value="acoso">Acoso</option>
                        <option value="otros">Otros</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="report-description">Descripción (opcional):</label>
                    <textarea id="report-description" name="description" rows="4"></textarea>
                </div>
                <div class="form-error-message" style="display: none;"></div>
                <button type="submit" class="btn btn-primary">Enviar Reporte</button>
            </form>
        </div>
    </div>

    <div id="manage-album-modal" class="modal">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <h2>Gestionar Álbum</h2>
            <div class="management-tabs tabs">
                <button class="tab-link active" data-tab="details-tab">Detalles</button>
                <button class="tab-link" data-tab="media-tab">Archivos</button>
                <button class="tab-link" data-tab="upload-tab">Subir Más</button> </div>

            <div id="details-tab" class="tab-content active">
                <form id="edit-album-form">
                    <div class="form-group">
                        <label>Título:</label>
                        <input type="text" name="title" required>
                    </div>
                    <div class="form-group">
                        <label>Descripción:</label>
                        <textarea name="description" rows="4"></textarea>
                    </div>
                    <div class="form-group">
                        <label>Etiquetas (separadas por comas):</label>
                        <input type="text" name="tags">
                    </div>
                    <button type="submit" class="btn btn-primary">Guardar Cambios</button>
                </form>
            </div>

            <div id="media-tab" class="tab-content">
                <p>Arrastra los archivos para reordenarlos. Haz clic en el ícono <i class="fas fa-image"></i> para establecer un archivo como portada.</p>
                <div id="media-management-grid" class="media-management-grid"></div>
                <button id="save-order-btn" class="btn btn-primary" style="margin-top: 1rem;">Guardar Orden</button>
            </div>

            <div id="upload-tab" class="tab-content">
                <form id="add-media-form">
                    <p>Selecciona una o varias fotos/videos para añadir a este álbum.</p>
                    <div class="form-group">
                        <label for="add-files-input" class="btn btn-secondary custom-file-upload">
                            Seleccionar Archivos...
                        </label>
                        <input id="add-files-input" type="file" name="file" required multiple style="display: none;">
                        <span id="add-files-status" class="file-upload-status"></span>
                    </div>
                    <button type="submit" class="btn btn-primary">Añadir Archivos</button>
                </form>
            </div>
        </div>
    </div>
    <div id="toast-container"></div>

    <div id="confirm-modal" class="modal">
        <div class="modal-content">
            <h2 id="confirm-title">Confirmar Acción</h2>
            <p id="confirm-message">¿Estás seguro?</p>
            <div id="confirm-buttons">
                <button id="confirm-cancel-btn" class="btn btn-secondary">Cancelar</button>
                <button id="confirm-ok-btn" class="btn btn-primary">Aceptar</button>
            </div>
        </div>
    </div>
     <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script> <script src="/static/js/main.js"></script> <script src="/static/js/album.js"></script>
    <div id="search-modal" class="modal">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <h2>Buscar Usuarios o Álbumes</h2>
            <div class="form-group">
                <input type="text" id="search-input" placeholder="Escribe para buscar..." autocomplete="off">
            </div>
            <div id="search-results-container">
                </div>
        </div>
    </div>

    <div id="notifications-panel">
        <div class="panel-header">
            <h3>Notificaciones</h3>
            <button id="mark-all-as-read-btn">Marcar todo como leído</button>
        </div>
        <div id="notifications-list">
            </div>
    </div>
    <div id="search-modal" class="modal">
        <div class="modal-content">
            <button class="close-button">&times;</button>
            <h2>Buscar Usuarios o Álbumes</h2>
            <div class="form-group">
                <input type="text" id="search-input" placeholder="Escribe para buscar..." autocomplete="off">
            </div>
            <div id="search-results-container">
                </div>
        </div>
    </div>

    <div id="notifications-panel">
        <div class="panel-header">
            <h3>Notificaciones</h3>
            <button id="mark-all-as-read-btn">Marcar todo como leído</button>
        </div>
        <div id="notifications-list">
            </div>
    </div>
</body>
</html>